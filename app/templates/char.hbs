<div class="character">
	<div class="name">
		{{content-editable value=model.name editable=true}}
	</div>
	{{#ember-wormhole to="buttons"}}
		<div class="button characters" {{action "toCharacters"}}>
			<span>all characters</span>
			<i class="fa fa-users"></i>
		</div>
		<div class="button save" {{action "save"}}>
			<span>save</span>
			<i class="fa fa-cloud-upload"></i>
		</div>
		<div class="button download" {{action "download"}}>
			<span>download</span>
			<i class="fa fa-download"></i>
		</div>
		<a class="downloadlocation" download="{{filename}}.json" href="">v</a>
		<div class="button upload" {{action "upload"}}>
			<span>from file</span>
			<i class="fa fa-file-text-o"></i>
		</div>
		<input type="file" class="uploadInput" {{action "doUpload" on="change"}}/>
		<div class="button delete" {{action "delete"}}>
			<span>remove</span>
			<i class="fa fa-user-times"></i>
		</div>
	{{/ember-wormhole}}

	<div class="class" id="text-2">
		{{content-editable value=model.race tagName="span"}} {{content-editable value=model.class tagName="span"}} 
	</div>
	
	<div class="level">
		{{content-editable value=model.level}}
	</div>
	<div class="prof-bonus">
		<span class="label">proficiency bonus</span>
		<span class="value">{{profBonus}}</span>
	</div>
	<div class="image">
		{{file-upload url="/dnd/api/image" didUpload="handleUpload"}}
		<div class="figure">
			<img src="{{model.image}}" {{action "clickImage" on="click"}}/>
		</div>
	</div>

	{{char-stats char=model}}
	{{free-block title="Notes and effects" content=model.notes classNames="notes"}}

	<div class="life">
		<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
			<tbody>
				<tr>
					<td class="left">HP</td>
					{{content-editable value=model.hp.total tagName="td"}}
					{{content-editable value=model.hp.current tagName="td"}}
				</tr>

				<tr>
					<td class="left"></td>
					<td class="left">Total</td>
					<td class="left">Rem.</td>
				</tr>
			</tbody>
		</table>

		<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
			<tbody>
				<tr>
					<td class="left">HD</td>
					{{content-editable value=model.hd.total tagName="td"}}
					{{content-editable value=model.hd.current tagName="td"}}
				</tr>

				<tr>
					<td class="left"></td>
					<td class="right">Total</td>
					<td class="left">Rem.</td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="defenses">
		<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
			<tbody>
				<tr>
					{{content-editable value=model.ac.armor tagName="td"}}
				</tr>
				<tr>
					<td>Armor Class</td>
				</tr>
				<tr>
					{{content-editable value=model.ac.noArmor tagName="td"}}
				</tr>
				<tr>
					<td>AC - no armor</td>
				</tr>
			</tbody>
		</table>
	</div>

	<div class="abilities">
		<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
			<thead>
				<tr>
					<th>Str</th><th>Dex</th><th>Con</th><th>Int</th><th>Wis</th><th>Cha</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					{{content-editable value=model.abilities.str tagName="td"}}
					{{content-editable value=model.abilities.dex tagName="td"}}
					{{content-editable value=model.abilities.con tagName="td"}}
					{{content-editable value=model.abilities.int tagName="td"}}
					{{content-editable value=model.abilities.wis tagName="td"}}
					{{content-editable value=model.abilities.cha tagName="td"}}
				</tr>

				<tr>
					<td></td><td></td><td></td><td></td><td></td><td></td>
				</tr>

				<tr>
					<td>{{strmod}}</td><td>{{dexmod}}</td><td>{{conmod}}</td><td>{{intmod}}</td><td>{{wismod}}</td><td>{{chamod}}</td>
				</tr>
			</tbody>
		</table>
		
	</div>

	{{content-editable classNames="initiative" value=model.initiative}}
	{{content-editable classNames="perception" value=model.perception}}
	
	<div class="left-side">
		{{#each charBlocks.left as |block|}}
			{{#if (eq block.kind "specced")}}
				{{specced-block spec=block char=model classNames="char-block"}}
			{{else}}
				{{component block.kind char=model classNames="char-block"}}
			{{/if}}
		{{/each}}
	</div>

	<div class="right-side">
		{{#each charBlocks.right as |block|}}
			{{#if (eq block.kind "specced")}}
				{{specced-block spec=block char=model classNames="char-block"}}
			{{else}}
				{{component block.kind char=model classNames="char-block"}}
			{{/if}}
		{{/each}}
	</div>

	{{char-spell-book char=model}}
</div>
